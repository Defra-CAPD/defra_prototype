(function(){"use strict";var e=this,t=e.jQuery;"undefined"==typeof GOVUK&&(e.GOVUK={});var s=function(e,s){var i;this.selectedClass="selected",this.focusedClass="focused",void 0!==s&&t.each(s,function(e,t){this[e]=t}.bind(this)),"string"==typeof e?(i=t(e),this.selector=e,this.setInitialState(t(this.selector))):(this.$elms=e,this.setInitialState(this.$elms)),this.addEvents()};s.prototype.addEvents=function(){"undefined"!=typeof this.$elms?this.addElementLevelEvents():this.addDocumentLevelEvents()},s.prototype.setInitialState=function(e){e.each(function(e,s){var i=t(s);i.is(":checked")&&this.markSelected(i)}.bind(this))},s.prototype.markFocused=function(e,t){"focused"===t?e.parent("label").addClass(this.focusedClass):e.parent("label").removeClass(this.focusedClass)},s.prototype.markSelected=function(e){var s;"radio"===e.attr("type")?(s=e.attr("name"),t(e[0].form).find('input[name="'+s+'"]').parent("label").removeClass(this.selectedClass),e.parent("label").addClass(this.selectedClass)):e.is(":checked")?e.parent("label").addClass(this.selectedClass):e.parent("label").removeClass(this.selectedClass)},s.prototype.addElementLevelEvents=function(){this.clickHandler=this.getClickHandler(),this.focusHandler=this.getFocusHandler({level:"element"}),this.$elms.on("click",this.clickHandler).on("focus blur",this.focusHandler)},s.prototype.addDocumentLevelEvents=function(){this.clickHandler=this.getClickHandler(),this.focusHandler=this.getFocusHandler({level:"document"}),t(document).on("click",this.selector,this.clickHandler).on("focus blur",this.selector,this.focusHandler)},s.prototype.getClickHandler=function(){return function(e){this.markSelected(t(e.target))}.bind(this)},s.prototype.getFocusHandler=function(e){var s="document"===e.level?"focusin":"focus";return function(e){var i=e.type===s?"focused":"blurred";this.markFocused(t(e.target),i)}.bind(this)},s.prototype.destroy=function(){"undefined"!=typeof this.selector?t(document).off("click",this.selector,this.clickHandler).off("focus blur",this.selector,this.focusHandler):this.$elms.off("click",this.clickHandler).off("focus blur",this.focusHandler)},e.GOVUK.SelectionButtons=s}).call(this);